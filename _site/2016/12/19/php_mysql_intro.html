<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/github-dark.css" media="screen">
    <title>PHP MySQL Database</title>
  </head>
  <body>
    <header>
      <div class="container">
        <h1>Sunss0518.GitHub.io</h1>
        <h2></h2>
        <section id="downloads">
          <a href="https://github.com/sunss0518" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>
    <div class="container">
      <section id="main_content">
        <h2 id="php-mysql-database">PHP MySQL Database</h2>

<p>你可能需要用PHP连接和操作数据库。</p>

<p>PHP最流行的数据库是MySQL。</p>

<h3 id="什么是mysql">什么是MySQL？</h3>

<ul>
  <li>MySQL是可以用于web的数据库系统</li>
  <li>MySQL是一个运行在服务器上的数据库系统</li>
  <li>MySQL可以处理大小应用</li>
  <li>MySQL非常快，可靠，简单。</li>
  <li>MySQL用标准的SQL</li>
  <li>MySQL是在一个数字平台上编译的。</li>
  <li>MySQL是免费下载和使用的</li>
  <li>MySQL是Oracle公司开发，发布和支持的。</li>
</ul>

<p>MySQL中的数据被存储在表格中。表格中收集相关的数据在一起，它由行和列构成。</p>

<p>对于存储分类地消息，数据库是非常有用的。一个公司的数据库中可能包含以下表格：</p>

<ul>
  <li>Employees</li>
  <li>Products</li>
  <li>Customers</li>
  <li>Orders</li>
</ul>

<h3 id="php--mysql数据库系统">PHP + MySQL数据库系统</h3>

<ul>
  <li>PHP可以和MySQL跨平台结合（你可以在windows开发，在unix平台服务）</li>
</ul>

<h3 id="数据库查询">数据库查询</h3>

<p>查询是一个问题或是一个请求。</p>

<p>我们可以从数据库里查询指定的信息并返回一个记录集。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT LastName FROM Employees
</code></pre>
</div>
<p>上面的查询选择“Employees”表中“LastName”列的所有数据。</p>

<h3 id="下载mysql数据库">下载MySQL数据库</h3>

<p>如果你的PHP服务器没有MySQL数据库，你可以免费下载它：<a href="http://www.mysql.com">http://www.mysql.com</a></p>

<hr />

<h2 id="php连接到mysql">PHP连接到MySQL</h2>

<p>PHP 5及以后的版本用MySQL数据库工作可以使用：</p>

<ul>
  <li>MySQLi扩展(“i”代表改进版)</li>
  <li>PDO (PHP Data Objects)</li>
</ul>

<p>之前的版本用MySQL扩展。然而，这个扩展在2012年被不赞成使用。</p>

<h3 id="我应该使用mysqli还是pdo">我应该使用MySQLi还是PDO？</h3>

<p>如果你需要一个简短的回答，答案将是“随你便”。</p>

<p>两者都有各自的优点：</p>

<p>PDO工作在12种不同的数据库系统，MySQLi则只工作在MySQL数据库。</p>

<p>所以，如果你不得不让你的项目工作在另一个数据库上，PDO可以使过程简单。你只需要改变连接字符串和一点点查询。用MySQLi则需要重写全部代码–包括查询。</p>

<p>两者都是面向对象的（object-oriented），但MySQLi还提供程序API。</p>

<p>两者都支持预准备语句（Prepared Statement）。预准备语句保护SQL注入对于web应用安全非常重要。</p>

<h3 id="mysql例子用的mysqli以及pdo语法">MySQL例子用的MySQLi以及PDO语法</h3>

<p>在下面的章节中，我们演示三种工作方式：</p>

<ul>
  <li>MySQLi(object-oriented)</li>
  <li>MySQLi(procedural)</li>
  <li>PDO</li>
</ul>

<h3 id="mysqli安装">MySQLi安装</h3>

<p>对于Linux和Windows：在大多数情况下，当php5 mysql包安装时MySQLi扩展是自动安装的。</p>

<p>安装细节，请转到：
<a href="http://php.net/manual/en/mysqli.installation.php">http://php.net/manual/en/mysqli.installation.php</a></p>

<h3 id="pdo安装">PDO安装</h3>

<p>安装细节，请转到：
<a href="http://php.net/manual/en/pdo.installation.php">http://php.net/manual/en/pdo.installation.php</a></p>

<h3 id="连接mysql">连接MySQL</h3>

<p>我们获取MySQL数据库中的数据之前，需要先与服务器连接在一起：</p>

<h6 id="examplemysqli-object-oriented">Example(MySQLi Object-Oriented)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";

// Create connection
$conn = new mysqli($servername, $username, $password);

// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connectI_error);
}
echo "Connected successfully";
?&gt;
</code></pre>
</div>
<div class="text">
	<strong>PHP是一个令人惊奇和流行的语言</strong>
	<p>注意上面关于面向对象的例子：$connect_error直到PHP 5.2.9 和 5.3.0都不能用。如果你需要确保PHP 5.2.9和5.3.0及之前版本能够兼容，用下面的代码替代：</p>
	<p>// Check connection</p>
	<p>if (mysqli_connection_error()) {
	    die("Database connection failed: " . mysqli_connect_error());
	}</p>
</div>

<h6 id="examplemysqli-procedural">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";

// Create connection
$conn = mysqli_connect($servername, $username, $password);

// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}
echo "Connected successfully";
?&gt;
</code></pre>
</div>
<h6 id="examplepdo">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";{

try {
    $conn = new PDO("mysql:host=$servername;dbname=myDB",
    $username, $password);
    // set the PDO error mode to exception
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE,
    PDO::ERRMODE_EXCEPTION);
    echo "Connected successfully";
}
?&gt;
</code></pre>
</div>
<div class="text">
	注意上面的PDO例子，我们指定了一个数据库（myDB）。PDO请求连接到一个有效的数据库。如果指定数据库不存在，抛出异常。
</div>
<p><strong>小建议：</strong>PDO有一个好处，它有一个异常类去处理在数据库查询中可能出现的所有问题。如果try{}代码块抛出异常，则脚本停止运行，直接执行接下来的第一个catch{}代码块。</p>

<h3 id="关闭连接">关闭连接</h3>

<p>脚本到达末尾时连接将自动关闭。关闭连接之前，用以下代码：</p>

<h6 id="examplemysqli-object-oriented-1">Example(MySQLi Object-Oriented)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>$conn-&gt;close();
</code></pre>
</div>

<h6 id="examplemysqli-procedural-1">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>mysqli_close($conn);
</code></pre>
</div>

<h6 id="examplepdo-1">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>$conn = null;
</code></pre>
</div>

<hr />

<h2 id="php-创建一个mysql数据库">PHP 创建一个MySQL数据库</h2>

<p>一个数据库由一个或多个表格构成。</p>

<p>你需要特殊的CREATE创建和删除一个数据库的特权。</p>

<h3 id="用mysqli和pdo创建一个数据库">用MySQLi和PDO创建一个数据库</h3>

<p>用CREATE DATABASE语句在MySQL中创建一个数据库。</p>

<p>下面的例子创建一个叫做“myDB”的数据库：</p>

<h6 id="examplemysqli-object-oriented-2">Example(MySQLi Object-oriented)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";

// Create connection
$conn = new mysqli($servername, $username, $password);
// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connect_error);
}

// Create database
$sql = "CREATE DATABASE myDB";
if ($conn-&gt;query($sql) == TRUE) {
    echo "Database created successfully";
} else {
    echo "Error creating database: " . $conn-&gt;error;
}

$conn-&gt;close();
?&gt;
</code></pre>
</div>
<div class="text">
	<p><strong>注意：</strong>当你创建一个新的数据库时，你必须只指定mysqli object(servername, username and password)的前三个参数。</p>
	<p><strong>小建议：</strong>如果你不得不用一个指定的端口，则需为数据库名字参数添加一个空的字符串，像这样：new mysqli("localhost", "username", "password", "", port)</p>
</div>

<h6 id="examplemysqli-procedural-2">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";

// Create connection
$conn = mysqli_connect($servername, $username, $password);
// Create connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// Create database
$sql = "CREATE DATABASE myDB";
if (mysqli_query($conn, $sql)) {
    echo "Database created successfully";
} else {
    echo "Error creating database: " . mysqli_error($conn);
}

mysqli_close($conn);
?&gt;
</code></pre>
</div>
<p><strong>注意：</strong>下面的PDO例子创建一个叫做“myDBPDO”的数据库：</p>

<h6 id="examplepdo-2">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";

try {
    $conn = new PDO("mysql:host=$servername;dbname=myDB", $username, $password);
    // set the PDO error mode to exception;
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "CREATE DATABASE myDBPDO";
    // use exec() because no results are returned
    $conn-&gt;exec($sql);
    echo "Database created successfully&lt;br&gt;";
} catch(PDOException $e) {
    echo $sql . "&lt;br&gt;" . $e-&gt;getMessage();
}

$conn = null;
?&gt;
</code></pre>
</div>
<p><strong>小建议：</strong>上面的catch代码块，我们可以输出SQL语句、生成错误消息。</p>

<hr />

<h2 id="php-创建mysql表格">PHP 创建MySQL表格</h2>

<p>一个数据库表格有唯一的名字，它由列和行构成。</p>

<h3 id="用mysqli和pdo创建一个mysql表格">用MySQLi和PDO创建一个MySQL表格</h3>

<p>CREATE TABLE语句用于在MySQL中创建一个表格。</p>

<p>我们将创建一个叫做“MyGuests”的表格，它有五列：“id”，“firstname”，“lastname”，“email”，“reg_date”：</p>
<div class="text">
	CREATE TABLE MyGuests (
	id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
	firstname VARCHAR(30) NOT NULL,
	lastname VARCHAR(30) NOT NULL,
	email VARCHAR(50),
	reg_date TIMESTAMP
	)
</div>
<p><strong>上面的表格需要注意：</strong></p>
<p>指定的数据类型是列数据可以保存的数据类型。</p>

<p>数据类型之后，你可以为每列指定其它可选的属性：</p>

<ul>
  <li>NOT NULL - 对于该列，每行必需包含一个值，不允许空值</li>
  <li>DEFAULT value - 当没有其它值被传递时，设置一个默认值添加给它</li>
  <li>UNSIGNED - 用于数字类型，将存储的数据限制为整数和零</li>
  <li>AUTO INCREMENT - 每添加一个新记录，MySQL自动给字段的值加1</li>
  <li>PRIMARY KEY - Used to uniquely identify the rows in a table. The column with PRIMARY KEY setting is often an ID number, and is often used with AUTO_INCREMENT</li>
</ul>

<p>每个表格应该有一个主键列（本案例是“id”列）。对于表格中每个记录来说，它的值是唯一的。</p>

<p>下面的例子展示怎样创建表格：</p>

<h6 id="examplemysqli-object-oriented-3">Example(MySQLi Object-oriented)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connect_error);
}

// sql to create table
$sql = "CREATE TABLE MyGuest (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
firstname VARCHAR(30) NOT NULL,
lastname VARCHAR(30) NOT NULL,
email VARCHAR(50),
reg_date TIMESTAMP
)";

if ($conn-&gt;query($sql) === TRUE) {
    echo "Table MyGuests created successfully";
} else {
    echo "Error creating table: " . $conn-&gt;error;
}

$conn-&gt;close();
?&gt;
</code></pre>
</div>
<h6 id="examplemysqli-procedural-3">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);
// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// sql to create table
$sql = "CREATE TABLE MyGuests (
id INT(6) UNSIGNED AUTOINCREMENT PRIMARY KEY,
firstname VARCHAR(30) NOT NULL,
lastname VARCHAR(30) NOT NULL,
email VARCHAR(50),
reg_date TIMESTAMP
)";

if (mysqli_query($conn, $sql)) {
    echo "Table MyGuests created successfully";
} else {
    echo "Error creating table: " . mysqli_error($conn);
}

mysqli_close($conn);
?&gt;
</code></pre>
</div>
<h6 id="examplepdo-3">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDBPDO";

try {
    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    // set the PDO error mode to exception
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // sql to create table
    $sql = "CREATE TABLE MyGuests (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    firstname VARCHAR(30) NOT NULL,
    lastname VARCHAR(30) NOT NULL,
    email VARCHAR(50),
    reg_date TIMESTAMP
    )";

    // use exec() because no results are returned
    $conn-&gt;exec($sql);
    echo "Table MyGuests created successfully";
    }
catch(PDOException $e)
    {
    echo $sql . "&lt;br&gt;" . $e-&gt;getMessage();
    }

$conn = null;
?&gt;
</code></pre>
</div>

<hr />

<h2 id="php-向mysql中插入数据">PHP 向MySQL中插入数据</h2>

<h3 id="用mysqli和pdo向mysql中插入数据">用MySQLi和PDO向MySQL中插入数据</h3>

<p>创建数据库和表格后，我们可以开始为它们添加数据。</p>

<p>以下是一些语法规则：</p>

<ul>
  <li>SQL查询必需加引号</li>
  <li>SQL查询中的字符串值必需加引号</li>
  <li>数值不需加引号</li>
  <li>空值不需加引号</li>
</ul>

<p>INSERT INTO语句用来向表格中添加新的记录：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...)
</code></pre>
</div>
<p>在上一个章节，我们创建了一个叫做“MyGuests”的空表格，它包含5列：“id”，“firstname”，“lastname”，“email”和“reg_date”。现在，让我们把这个表格填满数据。</p>
<div class="text">
	<strong>注意：</strong>如果一个列是AUTO_INCREMENT（像“id”列）或TIMESTAMP（像“reg_date”列），在SQL查询中它不需要指定；MySQL将自动添加它的值。
</div>

<h6 id="examplemysqli-object-oriented-4">Example(MySQLi Object-oriented)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connect_error);
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com')";

if ($conn-&gt;query($sql) === TRUE) {
    echo "New record created successfully";
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;
}

#conn-&gt;close();
?&gt;
</code></pre>
</div>
<h6 id="examplemysqli-procedural-4">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);
// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com')";

if (mysqli_query($conn, $sql)) {
    echo "New record created successfully";
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . mysqli_error($conn);
}

mysqli_close($conn);
?&gt;
</code></pre>
</div>
<h6 id="examplepdo-4">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDBPDO";

try {
    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    // set the PDO error mode to exception
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "INSERT INTO MyGuests (firstname, lastname, email)
    VALUES ('John', 'Doe', 'john@example.com')";
    // use exec() because no results are returned
    $conn-&gt;exec($sql);
    echo "New record created successfully";
    }
catch(PDOException $e)
    {
    echo $sql . "&lt;br&gt;" . $e-&gt;getMessage();
    }

$conn = null;
?&gt;
</code></pre>
</div>

<hr />

<h2 id="php-get-id-of-last-inserted-record">PHP Get ID of Last Inserted Record</h2>

<h3 id="get-id-of-the-last-inserted-record">Get ID of The Last Inserted Record</h3>

<p>如果我们用AUTO_INCREMENT字段在一个表格上执行一个INSERT或UPDATE，我们可以立即得到最后插入/更新的记录的ID。</p>

<p>表格“MyGuests”中，“id”列是AUTO_INCREMENT字段：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CREATE TABLE MyGuests (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
firstname VARCHAR(30) NOT NULL,
lastname VARCHAR(30) NOT NULL,
email VARCHAR(50),
reg_date TIMESTAMP
)
</code></pre>
</div>
<p>下面的例子和上章节的例子差不多，只不过增加了一行恢复最后插入记录的ID的代码：</p>

<h6 id="example">Example</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connect_error);
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com')";

if ($conn-&gt;query($sql) === TRUE) {
    $last_id = $conn-&gt;insert_id;
    echo "New record created successfully. Last inserted ID is: " . $last_id;
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;
}

$conn-&gt;close();
?&gt;
</code></pre>
</div>
<h6 id="examplemysqli-procedural-5">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);
// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com')";

if (mysqli_query($conn, $sql)) {
    $last_id = mysqli_insert_id($conn);
    echo "New record created successfully. Last inserted ID is: " . $last_id;
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . mysqli_error($conn);
}

mysqli_close($conn);
?&gt;
</code></pre>
</div>
<h6 id="examplepdo-5">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDBPDO";

try {
    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    // set the PDO error mode to exception
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "INSERT INTO MyGuests (firstname, lastname, email)
    VALUES ('John', 'Doe', 'john@example.com')";
    // use exec() because no results are returned
    $conn-&gt;exec($sql);
    $last_id = $conn-&gt;lastInsertId();
    echo "New record created successfully. Last inserted ID is: " . $last_id;
    }
catch(PDOException $e)
    {
    echo $sql . "&lt;br&gt;" . $e-&gt;getMessage();
    }

$conn = null;
?&gt;
</code></pre>
</div>

<hr />

<h2 id="php-insert-multiple-records-into-mysql">PHP Insert Multiple Records Into MySQL</h2>

<h3 id="insert-multiple-records-into-mysql-using-mysqli-and-pdo">Insert Multiple Records Into MySQL Using MySQLi and PDO</h3>

<p>多行SQL语句必需用mysqli_multi_query()函数执行。</p>

<p>下面的例子向表格“MyGuests”中增加三行新的记录：</p>

<h6 id="example-1">Example</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn-&gt;connect_error) {
    die("Connection failed: " . $conn-&gt;connect_error);
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com');";
$sql .= "INSERT INTO MyGuests (firsrname, lastname, email)
VALUES ('Mary', 'Moe', 'mary@example.com');";
$sql .= "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('Julie', 'Dooley', 'julie@example.com')";

if ($conn-&gt;multi_query($sql) === TRUE) {
    echo "New records created successfully";
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;
}

$conn-&gt;close();
?&gt;
</code></pre>
</div>
<div class="text">
	注意SQL语句必需用分号分割开。
</div>

<h6 id="examplemysqli-procedural-6">Example(MySQLi Procedural)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDB";

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);
// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

$sql = "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('John', 'Doe', 'john@example.com');";
$sql .= "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('Mary', 'Moe', mary@example.com');";
$sql .= "INSERT INTO MyGuests (firstname, lastname, email)
VALUES ('Julie', 'Dooley', 'julie@example.com')";

if (mysqli_multi_query($conn, $sql)) {
    echo "New records created successfully";
} else {
    echo "Error: " . $sql . "&lt;br&gt;" . mysqli_error($conn);
}

mysqli_close($conn);
?&gt;
</code></pre>
</div>
<p>PDO方式有一点不同：</p>

<h6 id="examplepdo-6">Example(PDO)</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDBPDO";

try {
    $conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
    // set the PDO error mode to exception
    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_ERRMOED_EXCEPTION);

    // begin the transaction
    $conn-&gt;beginTransaction();
    // our SQL statements
    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email)
    VALUES ('John', 'Doe', 'john@example.com')");
    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email)
    VALUES ('Mary', 'Moe', 'mary@example.com')");
    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email)
    VALUES ('Julie', 'Dooley', 'julie@example.com')");

    // commit the transaction
    $conn-&gt;commit();
    echo "New records created successfully";
    }
catch(PDOException $e)
    {
    // roll back the transaction if something failed
    $conn-&gt;rollback();
    echo "Error: " . $e-&gt;getMessage();
    }

$conn = null;
?&gt;
</code></pre>
</div>

      </section>
      <section id="main_comment">
        <noscript>Please enable JavaScript to view the comment form powered by <a href="https://commentit.io/">Comm(ent|it)</a></noscript>
        <div id="commentit"></div>
        <script type="text/javascript">
          /** CONFIGURATION VARIABLES **/
          var commentitUsername = 'sunss0518';
          var commentitRepo = 'sunss0518/sunss0518.github.io';
          var commentitPath = '_posts/2016-12-19-php_mysql_intro.md';
        
          /** DON'T EDIT FOLLOWING LINES **/
          (function() {
              var commentit = document.createElement('script');
              commentit.type = 'text/javascript';
              commentit.async = true;
              commentit.src = 'https://commentit.io/static/embed/dist/commentit.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(commentit);
          })();
        </script>
      </section>
    </div>
    <footer>
      <div class="container">
        <table>
          <th><small>孙帅帅的博客</small></th>
          <td><a href="http://weibo.com/2535244965/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" class="btn" target="_blank">Sina</a></td>
          <td><a href="http://codepen.io/sunss0518/" class="btn" target="_blank">Codepen</a></td>
        </table>
      </div>
    </footer>      
  </body>
</html>
